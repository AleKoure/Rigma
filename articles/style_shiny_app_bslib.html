<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using `bslib` variables to stylize shiny • Rigma</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using `bslib` variables to stylize shiny">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rigma</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/rigma_intro.html">Introduction to Figma API</a></li>
    <li><a class="dropdown-item" href="../articles/style_shiny_app_bslib.html">Using `bslib` variables to stylize shiny</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AleKoure/Rigma/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Using `bslib` variables to stylize shiny</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AleKoure/Rigma/blob/main/vignettes/style_shiny_app_bslib.Rmd" class="external-link"><code>vignettes/style_shiny_app_bslib.Rmd</code></a></small>
      <div class="d-none name"><code>style_shiny_app_bslib.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/bslib/" class="external-link">bslib</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org" class="external-link">rlang</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this example we will start by adding styles to a ‘Figma’ file.
Then we will use these variables to define the high level
<code>bslib</code> variables used for stylizing Shiny applications.</p>
<div class="section level3">
<h3 id="initial-steps">Initial Steps<a class="anchor" aria-label="anchor" href="#initial-steps"></a>
</h3>
<p>In order to get style data from a ‘Figma’ file using the REST API the
following steps should followed:</p>
<ol style="list-style-type: decimal">
<li><p>Create a Figma team</p></li>
<li><p>Create a Figma file and move it to the Figma team</p></li>
<li><p>Add your favorite styles (they should appear in the
<strong>Design</strong> selection at the top right of your
screen)</p></li>
<li><p>Click Assets on the top left and select the book icon to
<strong>publish</strong> your styles.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="adding-bootstrap-variables---bslib">Adding Bootstrap variables - <code>bslib</code><a class="anchor" aria-label="anchor" href="#adding-bootstrap-variables---bslib"></a>
</h3>
<p>The <code>bslib</code> library allows to manipulate the theme of a
shiny application using bootstrap variables. In these example we
demonstrate how to use high level bootstrap variables to stylize your
application.</p>
<p>The high level bootstrap variables are the arguments of the functions
<code><a href="https://rstudio.github.io/bslib/reference/bs_theme.html" class="external-link">bslib::bs_theme</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/fn_fmls.html" class="external-link">fn_fmls_names</a></span><span class="op">(</span><span class="fu">bslib</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/bslib/reference/bs_theme.html" class="external-link">bs_theme</a></span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "bg"           "fg"           "primary"      "secondary"    "success"     </span></span>
<span><span class="co">#&gt;  [6] "info"         "warning"      "danger"       "base_font"    "code_font"   </span></span>
<span><span class="co">#&gt; [11] "heading_font" "font_scale"   "bootswatch"</span></span></code></pre></div>
<p>By using these names as style names into a ‘Figma’ file we can
directly manipulate the theme of the Application.</p>
<p>Open the ‘Figma’ file and insert the styles of your choice using
<code>blib</code> variable names as printed from the previous chunk. On
the right hand side of your screen you should get a View similar to the
following:</p>
<div class="float">
<img src="figma_bslib.png" alt="Figma file with bslib variables"><div class="figcaption">Figma file with bslib variables</div>
</div>
<p>After defining some of the variables that you want to modify navigate
to the top left and select Assets. Then, push the book button to publish
the changes on the file. Now the file is ready to be accessed from an R
session using <code>Rigma</code>.</p>
</div>
<div class="section level3">
<h3 id="extract-data-to-r">Extract data to R<a class="anchor" aria-label="anchor" href="#extract-data-to-r"></a>
</h3>
<p>We can access published data via ‘Figma’ REST API. Find the file id
in the URL of the ‘Figma’ file. Then, collect style data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_key</span> <span class="op">&lt;-</span> <span class="st">"sFHgQh9dL6369o5wrZHmdR"</span> <span class="co">#add your own file_key</span></span>
<span><span class="va">style_data</span> <span class="op">&lt;-</span> <span class="va">file_key</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">Rigma</span><span class="fu">::</span><span class="fu"><a href="../reference/get_file_styles.html">get_file_styles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">Rigma</span><span class="fu">::</span><span class="fu"><a href="../reference/as_design_tibble.html">as_design_tibble</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The color is encoded in thumbnail URLs provided by the API
(alternatively you can get color metadata from node ids and using the
<code><a href="../reference/get_file_nodes.html">Rigma::get_file_nodes()</a></code> method). For this tutorial, we
include an example function that collects color data using the thumbnail
URLs, <code><a href="../reference/add_color.html">add_color()</a></code>. We can get high level <code>bslib</code>
color variables by executing:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bslib_palette</span> <span class="op">&lt;-</span> <span class="va">style_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">Rigma</span><span class="fu">::</span><span class="fu"><a href="../reference/add_color.html">add_color</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">Rigma</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_bslib_palette.html">extract_bslib_palette</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="text-data">Text data<a class="anchor" aria-label="anchor" href="#text-data"></a>
</h4>
<p>Metadata about text can be extracted using the following
function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text_data</span> <span class="op">&lt;-</span> <span class="fu">Rigma</span><span class="fu">::</span><span class="fu"><a href="../reference/text_data_from_styles.html">text_data_from_styles</a></span><span class="op">(</span><span class="va">style_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#get base_font Figma style variable - see also snapshot</span></span>
<span><span class="va">base_font</span> <span class="op">&lt;-</span> <span class="va">text_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"base_font"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">fontFamily</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/sass/reference/font_face.html" class="external-link">font_google</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="creating-bs_theme-object">Creating <code>bs_theme</code> object<a class="anchor" aria-label="anchor" href="#creating-bs_theme-object"></a>
</h4>
<p>Collecting the font and color data we can create the
<code>bs_theme</code> object that can be used to stylize a shiny app</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bslib_vars</span> <span class="op">&lt;-</span> <span class="va">bslib_palette</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>base_font <span class="op">=</span> <span class="va">base_font</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">rigma_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/exec.html" class="external-link">exec</a></span><span class="op">(</span><span class="va">bs_theme</span>, <span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">bslib_vars</span><span class="op">)</span></span></code></pre></div>
<p>and the shiny app should read</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">navbarPage</span><span class="op">(</span></span>
<span>  theme <span class="op">=</span> <span class="va">rigma_theme</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">shinyApp</span><span class="op">(</span><span class="va">ui</span>, <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexandros Kouretsis, Eli Pousson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
